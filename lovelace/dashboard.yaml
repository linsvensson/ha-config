####################################################
#                                                  #
#                   DASHBOARD                      #
#                                                  #
####################################################
title: Dashboard
icon: mdi:tablet-dashboard
path: dashboard
panel: true
visible:
  - user: 6c0e940acaba49b89d3d0f3fadef574f
cards:
  - type: vertical-stack
    cards:
    
          ###########################################################
          #                                                         #                                                                                 
          #                        SIDEBAR                          #
          #                                                         #                                                                                 
          ###########################################################
      - type: custom:nest-layout-card
        layout: horizontal
        max_width: [300px, 100%]
        column_num: 2
        max_columns: 2
        cards:
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:decluttering-card
                        template: nest_picture_button
                        variables:
                          - entity: person.carolin
                          - entity_picture: /local/lin.png
                  - type: custom:decluttering-card
                    template: nest_button
                    variables:
                      - entity: alarm_control_panel.aarlo_arlo
                      - state:
                          - value: 'armed_away'
                            icon: mdi:shield-lock
                            color: rgb(152,251,152)
                          - value: 'armed_home'
                            icon: mdi:shield-home
                            color: rgb(251, 210, 41)
                          - value: 'triggered'
                            icon: mdi:shield-alert
                            color: rgb(255, 0, 0)
                          - value: 'disarmed'
                            icon: mdi:shield-off
                            color: rgb(169,169,169)
                          - value: 'pending'
                            icon: mdi:shield-half-full
                            color: rgb(169,169,169)
                  - type: vertical-stack
                    cards:
                      - type: custom:decluttering-card
                        template: nest_picture_button
                        variables:
                          - entity: person.will
                          - entity_picture: /local/will.png
              - type: markdown
                content: |
                 <br><br><br><br><font size='9'>{{ states('sensor.time') }}</font><br>
                 
                 <font size='5'><b>{{ now().strftime('%A') }}</b>
                 <b>{{ now().strftime('%B %d') }}</b> </font><br><br><br>
              
                 <font size='6'>
                 {% if now().hour < 5 %} <b>Good night {{'\U0001F634'}}</b>
                   {% elif now().hour < 12 %} <b>Good morning</b> {{'\u2615\uFE0F'}}
                   {% elif now().hour < 18 %} <b>Good day</b> {{'\U0001F44B\U0001F3FB'}}
                   {% else %} <b>Good evening</b> {{'\U0001F44B\U0001F3FB'}}
                 {% endif %}</font><br><br><br><br>
                 
                 <font size='5' color="#E50000">
                 {% if states('sensor.fountain_days') | float >= 7 %} <b>{{'\u26A0'}} The water fountain needs cleaning</b>
                 {% endif %}<br>
                 {% if states('sensor.bathroom_litterbox_days') | float >= 28 %} <b>{{'\u26A0'}} The bathroom litterbox needs cleaning</b>
                 {% endif %}<br>
                 {% if states('sensor.left_litterbox_days') | float >= 14 %} <b>{{'\u26A0'}} The left litterbox needs cleaning</b>
                 {% endif %}<br>
                 {% if states('sensor.right_litterbox_days') | float >= 14 %} <b>{{'\u26A0'}} The right litterbox needs cleaning</b>
                 {% endif %}
                 </font>

                style: |
                  ha-card {
                    background-color: rgba(0, 0, 0, 0);
                    -webkit-box-shadow: none;
                    -moz-box-shadow: none;
                    box-shadow: none;
                    font-family: 'SF Text', sans-serif;
                  }
              
              #- type: horizontal-stack
              #  style:
              #    padding-top: 10
              #  cards:
              #     
              #    ###########################################################
              #    #                                                         #                                                                                 
              #    #                      INFO BUTTON                        #
              #    #                                                         #                                                                                 
              #    ###########################################################
              #    - type: custom:button-card
              #      style: |
              #        ha-card {
              #          background-color: rgba(0, 0, 0, 0);
              #          -webkit-box-shadow: none;
              #          -moz-box-shadow: none;
              #          box-shadow: none;
              #          text-align: center;
              #        }
              #      icon: 'mdi:information-outline'
              #      tap_action:
              #        action: call-service
              #        service: browser_mod.popup
              #        service_data:
              #          title: Close
              #          large: true
              #          style:
              #            border-radius: 0.8vw 0.8vw 0.8vw 0.8vw
              #          deviceID:
              #            - this
              #          card:
              #            type: custom:layout-card
              #            column_num: 3
              #            layout: vertical
              #            cards:
              #              - type: custom:hui-vertical-stack-card
              #                cards:
              #                  - type: entities
              #                    entities:
              #                      - entity: sensor.installed_version
              #                        name: Installed
              #                        icon: mdi:folder-download
              #                      - entity: sensor.latest_available_version
              #                        name: Latest Release
              #                        icon: mdi:github
              #                      - entity: sensor.badlogin
              #                        name: Bad Logins
              #                        icon: mdi:alert-circle
              #                      - entity: sensor.hacs
              #                        icon: mdi:package
              #                        name: HACS
              #                      - entity: sensor.home_assistant_log
              #                        icon: mdi:file-document
              #                        name: Log File
              #                      - entity: sensor.home_assistant_v2_db 
              #                        icon: mdi:file-document
              #                        name: Database
              #                    show_header_toggle: false
              #                    title: Home Assistant
              #                    style: |
              #                      ha-card {
              #                        box-shadow: none;
              #                        border-radius: 1vw;
              #                        background: none;
              #                        padding-right: 0.7em;
              #                      }
              #                  - type: "custom:button-card"
              #                    color_type: label-card
              #                    name: Set default theme
              #                    tap_action:
              #                      action: call-service
              #                      service: frontend.set_theme
              #                      service_data:
              #                        name: Light Soft UI Pink
              #              
              #              - break
              #              - type: entities
              #                show_header_toggle: false
              #                title: Paddington
              #                style: |
              #                  ha-card {
              #                    box-shadow: none;
              #                    border-radius: 1vw;
              #                    background: none;
              #                    padding-right: 0.7em;
              #                  }
              #                entities:
              #                  - entity: sensor.paddington_model
              #                    icon: mdi:tablet
              #                    name: Model
              #                  - entity: sensor.paddington_battery
              #                    name: Battery
              #                  - entity: sensor.paddington_is_plugged
              #                    icon: mdi:power-plug
              #                    name: Plugged in
              #                  - entity: sensor.paddington_screen_brightness
              #                    icon: mdi:brightness-percent
              #                    name: Screen brightness
              #                  - entity: sensor.paddington_screen_on
              #                    name: Screen on
              #                  - entity: sensor.paddington_memory_percentage
              #                    name: Memory - 3GB
              #                    background_style:
              #                      background: >-
              #                        radial-gradient(circle, rgba(45,45,45,1) 0%,
              #                        rgba(0,0,0,1) 100%)
              #                    card_style:
              #                      background: '#FFFFFF00'
              #                      box-shadow: none
              #                    height: 2.1em
              #                    icon: 'mdi:memory'
              #                    icon_position: left
              #                    icon_style:
              #                      color: 'var(--primary-color)'
              #                      margin-left: '-0.45em'
              #                      filter: none
              #                    max: 100
              #                    min: 0
              #                    rounding: 0.3em
              #                    severity:
              #                      - color: 'var(--accent-color)'
              #                        value: 90
              #                      - color: '#6d2525'
              #                        value: 100
              #                    style: |
              #                      ha-card {
              #                        background-color: #FFFFFF00;
              #                        margin-left: -0.4em;
              #                        margin-right: -0.7em;
              #                        margin-top: 0.1em;
              #                      }
              #                    type: 'custom:bar-card'
              #                    value_style:
              #                      color: 'var(--white)'
              #                      font-size: 0.95em
              #                      font-weight: 400
              #                    width: 50%
              #                  - entity: sensor.paddington_storage_percentage
              #                    name: Storage - 32GB
              #                    background_style:
              #                      background: >-
              #                        radial-gradient(circle, rgba(45,45,45,1) 0%,
              #                        rgba(0,0,0,1) 100%)
              #                    card_style:
              #                      background: '#FFFFFF00'
              #                      box-shadow: none
              #                    height: 2.1em
              #                    icon: 'mdi:sd'
              #                    icon_position: left
              #                    icon_style:
              #                      color: 'var(--primary-color)'
              #                      margin-left: '-0.45em'
              #                      filter: none
              #                    max: 100
              #                    min: 0
              #                    rounding: 0.3em
              #                    severity:
              #                      - color: 'var(--accent-color)'
              #                        value: 90
              #                      - color: '#6d2525'
              #                        value: 100
              #                    style: |
              #                      ha-card {
              #                      background-color: #FFFFFF00;
              #                      margin-left: -0.4em;
              #                      margin-right: -0.7em;
              #                      margin-top: 0.1em;
              #                      margin-bottom: 1.5em;
              #                      }
              #                    type: 'custom:bar-card'
              #                    value_style:
              #                      color: 'var(--white)'
              #                      font-size: 0.95em
              #                      font-weight: 400
              #                    width: 50%
              #                    
              #              - break
              #              - type: entities
              #                show_header_toggle: false
              #                title: Vally
              #                style: |
              #                  ha-card {
              #                    box-shadow: none;
              #                    border-radius: 1vw;
              #                    background: none;
              #                  }
              #                entities:
              #                  - entity: sensor.disk_use_percent_home
              #                    icon: mdi:harddisk
              #                    name: Disk Usage
              #                  - entity: sensor.vally_uptime
              #                    icon: mdi:clock
              #                    name: Uptime
              #              
              #                  - entity: sensor.processor_use
              #                    background_style:
              #                      background: >-
              #                        radial-gradient(circle, rgba(45,45,45,1) 0%,
              #                        rgba(0,0,0,1) 100%)
              #                    card_style:
              #                      background: '#FFFFFF00'
              #                      box-shadow: none
              #                    height: 2.1em
              #                    icon: 'mdi:memory'
              #                    icon_position: left
              #                    icon_style:
              #                      color: 'var(--primary-color)'
              #                      margin-left: '-0.45em'
              #                      filter: none
              #                    max: 100
              #                    min: 0
              #                    rounding: 0.3em
              #                    severity:
              #                      - color: 'var(--light-primary-color)'
              #                        value: 90
              #                      - color: '#6d2525'
              #                        value: 100
              #                    style: |
              #                      ha-card {
              #                        background-color: #FFFFFF00;
              #                        margin-left: -0.4em;
              #                        margin-right: -0.7em;
              #                        margin-top: 0.1em;
              #                      }
              #                    type: 'custom:bar-card'
              #                    value_style:
              #                      color: 'var(--white)'
              #                      font-size: 0.95em
              #                      font-weight: 400
              #                    width: 50%
              #                  - entity: sensor.vally_cpu_temp
              #                    name: CPU temp
              #                    background_style:
              #                      background: >-
              #                        radial-gradient(circle, rgba(45,45,45,1) 0%,
              #                        rgba(0,0,0,1) 100%)
              #                    card_style:
              #                      background: '#FFFFFF00'
              #                      box-shadow: none
              #                    height: 2.1em
              #                    icon: 'mdi:thermometer'
              #                    icon_position: left
              #                    icon_style:
              #                      color: 'var(--primary-color)'
              #                      margin-left: '-0.45em'
              #                      filter: none
              #                    max: 100
              #                    min: 0
              #                    rounding: 0.3em
              #                    severity:
              #                      - color: 'var(--accent-color)'
              #                        value: 90
              #                      - color: '#6d2525'
              #                        value: 100
              #                    style: |
              #                      ha-card {
              #                        background-color: #FFFFFF00;
              #                        margin-left: -0.4em;
              #                        margin-right: -0.7em;
              #                        margin-top: 0.1em;
              #                      }
              #                    type: 'custom:bar-card'
              #                    value_style:
              #                      color: 'var(--white)'
              #                      font-size: 0.95em
              #                      font-weight: 400
              #                    width: 50%
              #                  - entity: sensor.memory_use_percent
              #                    background_style:
              #                      background: >-
              #                        radial-gradient(circle, rgba(45,45,45,1) 0%,
              #                        rgba(0,0,0,1) 100%)
              #                    card_style:
              #                      background: '#FFFFFF00'
              #                      box-shadow: none
              #                    height: 2.1em
              #                    icon: 'mdi:memory'
              #                    icon_position: left
              #                    icon_style:
              #                      color: 'var(--primary-color)'
              #                      margin-left: '-0.45em'
              #                      filter: none
              #                    max: 100
              #                    min: 0
              #                    rounding: 0.3em
              #                    severity:
              #                      - color: 'var(--purple)'
              #                        value: 90
              #                      - color: '#6d2525'
              #                        value: 100
              #                    style: |
              #                      ha-card {
              #                        background-color: #FFFFFF00;
              #                        margin-left: -0.4em;
              #                        margin-right: -0.7em;
              #                        margin-top: 0.1em;
              #                      }
              #                    type: 'custom:bar-card'
              #                    value_style:
              #                      color: 'var(--white)'
              #                      font-size: 0.95em
              #                      font-weight: 400
              #                    width: 50%
              #                    
              #                  #- type: custom:mini-graph-card
              #                  #  show:
              #                  #    name: false
              #                  #    icon: false
              #                  #  entities:
              #                  #    - entity: sensor.asuswrt_download
              #                  #      name: TOTAL
              #                  #    - entity: sensor.asuswrt_download_speed
              #                  #      name: Download
              #                  #    - entity: sensor.asuswrt_upload_speed
              #                  #      name: Upload
              #                    
              #                  
              #    ###########################################################
              #    #                                                         #                                                                                 
              #    #                        SHOPPING                         #
              #    #                                                         #                                                                                 
              #    ###########################################################
              #    - type: custom:button-card
              #      style: |
              #        ha-card {
              #          background-color: rgba(0, 0, 0, 0);
              #          -webkit-box-shadow: none;
              #          -moz-box-shadow: none;
              #          box-shadow: none;
              #          text-align: center;
              #        }
              #      icon: 'mdi:basket-outline'
              #      tap_action:
              #        action: call-service
              #        service: browser_mod.popup
              #        service_data:
              #          title: Close
              #          style:
              #            border-radius: 0.8vw 0.8vw 0.8vw 0.8vw
              #          deviceID:
              #            - this
              #          card:
              #            type: shopping-list
              #            title: Shopping List
              #            
              #    ###########################################################
              #    #                                                         #                                                                                 
              #    #                      FEED BUTTON                        #
              #    #                                                         #                                                                                 
              #    ###########################################################
              #    - type: custom:button-card
              #      style: |
              #        ha-card {
              #          background-color: rgba(0, 0, 0, 0);
              #          -webkit-box-shadow: none;
              #          -moz-box-shadow: none;
              #          box-shadow: none;
              #          text-align: center;
              #        }
              #      icon: 'mdi:message-alert-outline'
              #      tap_action:
              #        action: call-service
              #        service: browser_mod.popup
              #        service_data:
              #          title: Close
              #          style:
              #            border-radius: 0.8vw 0.8vw 0.8vw 0.8vw
              #          deviceID:
              #            - this
              #          card:
              #            type: 'custom:home-feed-card'
              #            title: Home Feed
              #            scrollbars_enabled: false
              #            show_empty: false
              #            entities:
              #              - entity: switch.chester
              #                icon: mdi:television
              #                name: tv
              #              - entity: input_select.coffee_status
              #                icon: mdi:coffee
              #                name: coffee
              #              - entity: input_select.washer_status
              #                name: washer
              #                icon: mdi:washing-machine
              #              - entity: input_select.dryer_status
              #                name: dryer
              #                icon: mdi:tumble-dryer
              #              - entity: alarm_control_panel.aarlo_arlo
              #                name: alarm
              #                secondary_info: last-changed
              #              - entity: binary_sensor.front_door
              #                icon: mdi:door
              #              - entity: binary_sensor.kitchen_window
              #                icon: mdi:window-closed
              #                name: kitchen
              #              - entity: sensor.lounge_window
              #                name: lounge
              #              - entity: binary_sensor.bedroom_window
              #                name: bedroom
              #                icon: mdi:window-closed
              #              - entity: input_select.dishwasher_status
              #                name: sebastian
              #                icon: mdi:dishwasher
              #            style: |
              #              ha-card {
              #                font-family: 'SF Display', sans-serif;
              #              }
              #            
          - type: custom:layout-card
            column_num: 3
            layout: vertical
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: binary_sensor.front_door
                          - name: front door
                          - show_name: true
                          - show_state: false
                          - state:
                              - value: 'off'
                                icon: mdi:door-closed
                                color: rgb(152,251,152)
                              - value: 'on'
                                icon: mdi:door-open
                                color: rgb(255,69,0)
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: binary_sensor.hallway_motion
                          - name: hallway
                          - show_name: true
                          - show_state: false
                          - state:
                              - value: 'off'
                                icon: mdi:sleep
                                color: rgb(152,251,152)
                              - value: 'on'
                                icon: mdi:motion-sensor
                                color: rgb(255,69,0)
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: switch.kitchen_motion_sensor
                          - name: kitchen
                          - show_name: true
                          - show_state: false
                          - state:
                              - value: 'off'
                                icon: mdi:sleep
                                color: rgb(152,251,152)
                              - value: 'on'
                                icon: mdi:motion-sensor
                                color: rgb(255,69,0)
                  - type: horizontal-stack
                    cards:
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: binary_sensor.kitchen_window
                          - name: kitchen
                          - show_name: true
                          - show_state: false
                          - state:
                              - value: 'off'
                                icon: mdi:window-closed
                                color: rgb(152,251,152)
                              - value: 'on'
                                icon: mdi:window-open
                                color: rgb(255,69,0)
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: sensor.lounge_window
                          - name: lounge
                          - show_name: true
                          - show_state: false
                          - state:
                              - value: 'closed'
                                color: rgb(152,251,152)
                              - value: 'open'
                                color: rgb(255,69,0)
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: binary_sensor.bedroom_window
                          - name: bedroom
                          - show_name: true
                          - show_state: false
                          - state:
                              - value: 'off'
                                icon: mdi:window-closed
                                color: rgb(152,251,152)
                              - value: 'on'
                                icon: mdi:window-open
                                color: rgb(255,69,0)
              #- type: horizontal-stack
              #  cards:
              #    - type: custom:button-card
              #      entity: sensor.in2023_battery_level
              #      name: svante
              #      show_label: false
              #      show_name: true
              #      tap_action:
              #        action: more-info
              #      state:
              #        - value: 70
              #          operator: '>='
              #          color: rgb(152,251,152)
              #        - value: 30
              #          operator: '>='
              #          color: rgb(255,166,0)
              #        - value: 30
              #          operator: '<'
              #          color: rgb(255,69,0)
              #      style: |
              #        ha-card {
              #          font-family: 'SF Display', sans-serif;
              #        }
              #    - type: custom:button-card
              #      entity: sensor.battery_level_2
              #      name: bert
              #      show_label: false
              #      show_name: true
              #      tap_action:
              #        action: more-info
              #      state:
              #        - value: 70
              #          operator: '>='
              #          color: rgb(152,251,152)
              #        - value: 30
              #          operator: '>='
              #          color: rgb(255,166,0)
              #        - value: 30
              #          operator: '<'
              #          color: rgb(255,69,0)
              #      style: |
              #        ha-card {
              #          font-family: 'SF Display', sans-serif;
              #        } 
              
              - type: 'custom:text-divider-row'
                text: Lights
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: 'light.hallway'
                    color: auto
                    icon: 'mdi:ceiling-light'
                    name: hallway
                    hold_action:
                      action: more-info
                    #hold_action:
                    #  action: call-service
                    #  service: browser_mod.popup
                    #  service_data:
                    #    title: Close
                    #    style: |
                    #      ha-card {
                    #        background-color: rgba(0, 0, 0, 0);
                    #        -webkit-box-shadow: none;
                    #        -moz-box-shadow: none;
                    #        box-shadow: none;
                    #        text-align: center;
                    #        font-family: 'SF Display', sans-serif;
                    #      }
                    #    style:
                    #      border-radius: 0.8vw 0.8vw 0.8vw 0.8vw
                    #    deviceID:
                    #      - this
                    #    card:
                    #      type: entities
                    #      entities:
                    #        - entity: light.hallway
                    #        - type: 'custom:rgb-light-card'
                    #          entity: light.hallway
                    #          colors:
                    #              # Any option of the light.turn_on service can be used in each color
                    #              - rgb_color:
                    #                    - 255
                    #                    - 127
                    #                    - 255
                    #                brightness: 220
                    #                transition: 1
                    #              - hs_color:
                    #                    - 60
                    #                    - 30
                    #                icon_color: '#fff8b0' # Override icon color
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif !important;
                      }
                  - type: custom:button-card
                    entity: 'group.kitchen_spotlight'
                    icon: 'mdi:track-light'
                    name: kitchen
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif !important;
                      }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: 'light.kitchen_table'
                    icon: 'mdi:ceiling-light'
                    name: dining
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif !important;
                      }
                  - type: custom:button-card
                    entity: 'group.couch_time'
                    name: couch time
                    icon: 'mdi:sofa'
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif !important;
                      }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: 'group.lounge_spotlight'
                    icon: 'mdi:track-light'
                    name: lounge
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif !important;
                      }
                  - type: custom:button-card
                    entity: 'group.bedroom_cozy'
                    icon: 'mdi:bed-empty'
                    name: cozy
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif !important;
                      }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: 'input_boolean.motion_kitchen'
                    icon: 'mdi:ghost'
                    color: var(--light-primary-color)
                    name: kitchen
                    styles:
                      icon:
                        - color: >
                            [[[
                              if (entity.state == 'on') return 'var(--light-primary-color)';
                              else return 'var(--white)';
                            ]]]
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif !important;
                      }
                  - type: custom:button-card
                    entity: 'input_boolean.motion_hallway'
                    icon: 'mdi:ghost'
                    color: var(--light-primary-color)
                    name: hallway
                    styles:
                      icon:
                        - color: >
                            [[[
                              if (entity.state == 'on') return 'var(--light-primary-color)';
                              else return 'var(--white)';
                            ]]]
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif !important;
                      }
              - break
              - type: "custom:atomic-calendar"
                showProgressBar: true
                maxDaysToShow: 30
                entities:
                - entity: calendar.thepinkkiller_gmail_com
                  color: pink
                style: |
                  ha-card {
                    font-family: 'SF Display', sans-serif;
                  }
                  .cal-title {
                    height: 20px;
                    font-weight: bold;
                    margin-top: -20px;
                    margin-left: -8px;
                    font-size: 16px !important;
                    font-family: 'SF Display', sans-serif !important;
                  }
              - type: custom:button-card
                entity: 'sensor.greenely_prices'
                icon: 'mdi:leaf'
                name: Greenely
                show_name: false
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/greenelydash
                  #action: call-service
                  #service: browser_mod.popup
                  #service_data:
                  #  title: Close
                  #  style:
                  #    border-radius: 0.8vw 0.8vw 0.8vw 0.8vw
                  #  deviceID:
                  #    - this
                  #  card:
                  #    type: custom:vertical-stack-in-card
                  #    cards:
                  #      - type: horizontal-stack
                  #        cards:
                  #          - type: 'custom:flex-table-card'
                  #            title: Today
                  #            sort_by: date
                  #            entities:
                  #              include: sensor.greenely_prices
                  #            columns:
                  #              - name: time
                  #                attr_as_list: current_day
                  #                modify: x.time
                  #                icon: mdi:clock
                  #              - name: price(öre/kWh)
                  #                attr_as_list: current_day
                  #                modify: Math.round(x.price * 10) / 10
                  #                icon: mdi:cash
                  #          - type: 'custom:flex-table-card'
                  #            title: Tomorrow
                  #            sort_by: date
                  #            entities:
                  #              include: sensor.greenely_prices
                  #            columns:
                  #              - name: time
                  #                attr_as_list: next_day
                  #                modify: x.time
                  #                icon: mdi:clock
                  #              - name: price(öre/kWh)
                  #                attr_as_list: next_day
                  #                modify: Math.round(x.price * 10) / 10
                  #                icon: mdi:cash
                  #    style: |
                  #      ha-card {
                  #        font-family: 'SF Display', sans-serif;
                  #      }
                styles:
                  card:
                    - padding: 6%
                    - height: 170px
                    - font-size: 20px
                  grid:
                    - grid-template-areas: '"i price" "n n" "current current" "next next"'
                    - grid-template-columns: 1fr 1fr
                    - grid-template-rows: 1fr min-content min-content min-content
                  name:
                    - font-weight: bold
                    - font-size: 24px
                    - color: black
                    - align-self: middle
                    - justify-self: start
                    - padding-bottom: 4px
                  img_cell:
                    - justify-content: start
                    - align-items: start
                    - margin: none
                  icon:
                    - color: rgb(152,251,152)
                    - width: 80%
                    - margin-top: -10%
                  custom_fields:
                    price:
                      - align-self: start
                      - justify-self: end
                      - font-size: 20px
                    current:
                      - padding-bottom: 6px
                      - align-self: middle
                      - justify-self: start
                      - font-weight: bold
                      #- --text-color-sensor: '[[[ if (states['sensor.greenely_prices'].attributes.current_price > 30) return "rgb(255,69,0)"; ]]]'
                    next:
                      - padding-bottom: 2px
                      - align-self: middle
                      - justify-self: start
                      - font-size: 18px
                custom_fields:
                  price: >
                     [[[
                       return `<ha-icon
                         icon="mdi:account-cash"
                         style="width: 22px; height: 22px; color: var(--primary-color);">
                         </ha-icon><span> ${Math.round(entity.state)} kr</span>`
                     ]]]
                  current: >
                    [[[
                      return states['sensor.greenely_prices'].attributes.current_price + ' öre/kWh';
                    ]]]
                  next: >
                    [[[
                      var days = states['sensor.greenely_prices'].attributes.current_day;
                      var next_days = states['sensor.greenely_prices'].attributes.next_day;
                      var text = 'Next 4 hours:<br>';
                      var i;
                      var count = 0;
                      var time = states['sensor.time'].state;
                      
                      for (i = 0; i < days.length; i++) {
                        if (time < days[i].time) {
                          if (count < 4) {
                            count++;
                            text += Math.round( days[i].price * 10) / 10;
                            if (count < 4) {
                              text += ', ';
                            }
                          }
                        }
                      }
                      if (count < 4) {
                        for (i = 0; i < next_days.length; i++) {
                          if (count < 4) {
                            count++;
                            text += Math.round( next_days[i].price * 10) / 10;
                            if (count < 4) {
                              text += ', ';
                            }
                          }
                        }
                      }
                      return text;
                    ]]]
              
              - type: 'custom:text-divider-row'
                text: Kitties
              #- entity: media_player.much_cast_many_chrome
              #  type: custom:mini-media-player
              #  artwork: cover
              #  hide:
              #    power: false
              #    power_state: false
              #    play_stop: true
              #    source: true
              #  style: |
              #    ha-card {
              #      font-family: 'SF Display', sans-serif !important;
              #    }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: sensor.fountain_days
                    name: cleaned
                    icon: mdi:fountain
                    show_state: true
                    tap_action:
                      confirmation:
                        text: '[[[ return `Are you sure you have cleaned the kitty fountain?` ]]]'
                      action: call-service
                      service: script.turn_on
                      service_data:
                        entity_id: script.store_fountain_last_cleaned
                    styles:  
                      grid:
                        - grid-template-areas: '"s s" "i i" "n n"'
                        - grid-template-columns: 1fr 1fr
                        - grid-template-rows: 1fr min-content min-content
                      name:
                        - justify-self: middle
                        - align-self: middle
                        - text-transform: lowercase
                      state:
                        - align-self: middle
                        - justify-self: middle
                        - font-weight: bold
                        - font-size: 36px
                        - color: >
                           [[[
                             if (entity.state < 2) return '#C5C5D2';
                             else if (entity.state >= 2 && entity.state < 4) return 'rgb(152,251,152)';
                             else if (entity.state >= 4 && entity.state < 7) return '#FFA500';
                             else return 'rgb(255,69,0)';
                           ]]]
                      icon:
                        - justify-content: start
                        - align-items: start
                        - color: >
                           [[[
                            if (entity.state < 2) return '#C5C5D2';
                            else if (entity.state >= 2 && entity.state < 4) return 'rgb(152,251,152)';
                            else if (entity.state >= 4 && entity.state < 7) return '#FFA500';
                            else return 'rgb(255,69,0)';
                           ]]]
                  - type: custom:button-card
                    entity: sensor.fountain_filter_days
                    name: filter
                    icon: mdi:fountain
                    show_state: true
                    tap_action:
                      confirmation:
                        text: '[[[ return `Are you sure you have changed the kitty fountain filter?` ]]]'
                      action: call-service
                      service: script.turn_on
                      service_data:
                        entity_id: script.store_fountain_filter_last_changed
                    styles:  
                      grid:
                        - grid-template-areas: '"s s" "i i" "n n"'
                        - grid-template-columns: 1fr 1fr
                        - grid-template-rows: 1fr min-content min-content
                      name:
                        - justify-self: middle
                        - align-self: middle
                        - text-transform: lowercase
                      state:
                        - align-self: middle
                        - justify-self: middle
                        - font-weight: bold
                        - font-size: 36px
                        - color: >
                           [[[
                             if (entity.state < 14) return '#C5C5D2';
                             else if (entity.state >= 14 && entity.state < 28) return 'rgb(152,251,152)';
                             else if (entity.state >= 28 && entity.state < 50) return '#FFA500';
                             else return 'rgb(255,69,0)';
                           ]]]
                      icon:
                        - justify-content: start
                        - align-items: start
                        - color: >
                           [[[
                            if (entity.state < 14) return '#C5C5D2';
                            else if (entity.state >= 14 && entity.state < 28) return 'rgb(152,251,152)';
                            else if (entity.state >= 28 && entity.state < 50) return '#FFA500';
                            else return 'rgb(255,69,0)';
                           ]]]
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: sensor.bathroom_litterbox_days
                    name: bath
                    icon: mdi:emoticon-poop
                    show_state: true
                    tap_action:
                      confirmation:
                        text: '[[[ return `Are you sure you have cleaned the bathroom box?` ]]]'
                      action: call-service
                      service: script.turn_on
                      service_data:
                        entity_id: script.store_litterbox_bathroom_last_cleaned
                    styles:  
                      grid:
                        - grid-template-areas: '"s s" "i i" "n n"'
                        - grid-template-columns: 1fr 1fr
                        - grid-template-rows: 1fr min-content min-content
                      name:
                        - justify-self: middle
                        - align-self: middle
                        - text-transform: lowercase
                      state:
                        - align-self: middle
                        - justify-self: middle
                        - font-weight: bold
                        - font-size: 36px
                        - color: >
                           [[[
                             if (entity.state < 7) return '#C5C5D2';
                             else if (entity.state >= 7 && entity.state < 14) return 'rgb(152,251,152)';
                             else if (entity.state >= 14 && entity.state < 28) return '#FFA500';
                             else return 'rgb(255,69,0)';
                           ]]]
                      icon:
                        - justify-content: start
                        - align-items: start
                        - color: >
                           [[[
                            if (entity.state < 7) return '#C5C5D2';
                            else if (entity.state >= 7 && entity.state < 14) return 'rgb(152,251,152)';
                            else if (entity.state >= 14 && entity.state < 28) return '#FFA500';
                            else return 'rgb(255,69,0)';
                           ]]]
                  - type: custom:button-card
                    entity: sensor.left_litterbox_days
                    name: left
                    icon: mdi:emoticon-poop
                    show_state: true
                    tap_action:
                      confirmation:
                        text: '[[[ return `Are you sure you have cleaned the left box?` ]]]'
                      action: call-service
                      service: script.turn_on
                      service_data:
                        entity_id: script.store_litterbox_left_last_cleaned
                    styles:
                      grid:
                        - grid-template-areas: '"s s" "i i" "n n"'
                        - grid-template-columns: 1fr 1fr
                        - grid-template-rows: 1fr min-content min-content
                      name:
                        - justify-self: middle
                        - align-self: middle
                        - text-transform: lowercase
                      state:
                        - align-self: middle
                        - justify-self: middle
                        - font-weight: bold
                        - font-size: 36px
                        - color: >
                           [[[
                             if (entity.state < 4) return '#C5C5D2';
                             else if (entity.state >= 4 && entity.state < 7) return 'rgb(152,251,152)';
                              else if (entity.state >= 7 && entity.state < 14) return '#FFA500';
                              else return 'rgb(255,69,0)';
                            ]]]
                      icon:
                        - justify-content: start
                        - align-items: start
                        - color: >
                           [[[
                             if (entity.state < 4) return '#C5C5D2';
                             else if (entity.state >= 4 && entity.state < 7) return 'rgb(152,251,152)';
                             else if (entity.state >= 7 && entity.state < 14) return '#FFA500';
                             else return 'rgb(255,69,0)';
                           ]]]
                  - type: custom:button-card
                    entity: sensor.right_litterbox_days
                    name: right
                    icon: mdi:emoticon-poop
                    show_state: true
                    tap_action:
                      confirmation:
                        text: '[[[ return `Are you sure you have cleaned the right box?` ]]]'
                      action: call-service
                      service: script.turn_on
                      service_data:
                        entity_id: script.store_litterbox_right_last_cleaned
                    styles:
                      grid:
                        - grid-template-areas: '"s s" "i i" "n n"'
                        - grid-template-columns: 1fr 1fr
                        - grid-template-rows: 1fr min-content min-content
                      name:
                        - justify-self: middle
                        - align-self: middle
                        - text-transform: lowercase
                      state:
                        - align-self: middle
                        - justify-self: middle
                        - font-weight: bold
                        - font-size: 36px
                        - color: >
                           [[[
                             if (entity.state < 4) return '#C5C5D2';
                             else if (entity.state >= 4 && entity.state < 7) return 'rgb(152,251,152)';
                             else if (entity.state >= 7 && entity.state < 14) return '#FFA500';
                             else return 'rgb(255,69,0)';
                             ]]]
                      icon:
                        - justify-content: start
                        - align-items: start
                        - color: >
                           [[[
                             if (entity.state < 4) return '#C5C5D2';
                             else if (entity.state >= 4 && entity.state < 7) return 'rgb(152,251,152)';
                             else if (entity.state >= 7 && entity.state < 14) return '#FFA500';
                             else return 'rgb(255,69,0)';
                           ]]]
              
              - break
              - type: custom:vertical-stack-in-card
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: input_select.dishwasher_status
                          - show_name: false
                          - show_state: false
                          - show_label: true
                          - tap_action:
                             action: more-info
                             entity: switch.dishwasher
                          - state:
                             - value: 'False'
                               icon: mdi:dishwasher
                               label: 'off'
                               color: "#BAC0C6"
                             - value: 'idle'
                               label: 'idle'
                               icon: mdi:dishwasher
                               color: rgb(152,251,152)
                             - value: 'running'
                               label: 'running'
                               icon: mdi:dishwasher
                               color: "#FFA500"
                        style: |
                          ha-card {
                            font-family: 'SF Display', sans-serif;
                            padding-top: 15px !important;
                            background-color: rgba(0, 0, 0, 0);
                            -webkit-box-shadow: none;
                            -moz-box-shadow: none;
                            box-shadow: none;
                          }
                          ha-icon {
                            width: 60% !important;
                          }
                          img {
                            width: 100%;
                          }
                          #img-cell {
                            background-color: #F5F5F5;
                            height: 50px !important;
                            width: 50px !important;
                          }
                          #state {
                            padding-top: 5px;
                          }
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: input_select.washer_status
                          - show_name: false
                          - show_label: true
                          - show_state: false
                          - tap_action:
                              action: more-info
                              entity: switch.washer
                          - state:
                             - value: 'False'
                               icon: mdi:washing-machine
                               color: "#BAC0C6"
                               label: 'off'
                             - value: 'idle'
                               label: 'idle'
                               icon: mdi:washing-machine
                               color: rgb(152,251,152)
                             - value: 'running'
                               label: 'running'
                               icon: mdi:washing-machine
                               color: "#FFA500"
                        style: |
                          ha-card {
                            font-family: 'SF Display', sans-serif;
                            padding-top: 15px !important;
                            background-color: rgba(0, 0, 0, 0);
                            -webkit-box-shadow: none;
                            -moz-box-shadow: none;
                            box-shadow: none;
                          }
                          ha-icon {
                            width: 60% !important;
                          }
                          img {
                            width: 100%;
                          }
                          #img-cell {
                            background-color: #F5F5F5;
                            height: 50px !important;
                            width: 50px !important;
                          }
                          #state {
                            padding-top: 5px;
                          }
                        
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: input_select.dryer_status
                          - show_label: true
                          - show_name: false
                          - show_state: false
                          - tap_action:
                              action: more-info
                              entity: switch.dryer
                          - label: >
                             [[[ return states['input_select.dryer_status'].state ]]]
                          - state:
                             - value: 'False'
                               icon: mdi:tumble-dryer
                               color: "#BAC0C6"
                               label: 'off'
                             - value: 'idle'
                               label: 'idle'
                               icon: mdi:tumble-dryer
                               color: rgb(152,251,152)
                             - value: 'running'
                               label: 'running'
                               icon: mdi:tumble-dryer
                               color: "#FFA500"
                        style: |
                          ha-card {
                            font-family: 'SF Display', sans-serif;
                            padding-top: 15px !important;
                            background-color: rgba(0, 0, 0, 0);
                            -webkit-box-shadow: none;
                            -moz-box-shadow: none;
                            box-shadow: none;
                          }
                          ha-icon {
                            width: 60% !important;
                          }
                          img {
                            width: 100%;
                          }
                          #img-cell {
                            background-color: #F5F5F5;
                            height: 50px !important;
                            width: 50px !important;
                          }
                          #state {
                            padding-top: 5px;
                          }
                          
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: sensor.ac_power
                          - show_label: true
                          - show_name: false
                          - show_state: false
                          - tap_action:
                              action: more-info
                              entity: switch.ac
                          - state:
                              - value: 'off'
                                icon: mdi:air-conditioner
                                color: "#BAC0C6"
                                label: 'off'
                              - value: 'on'
                                label: 'on'
                                icon: mdi:air-conditioner
                                color: "#FFA500"
                        style: |
                          ha-card {
                            font-family: 'SF Display', sans-serif;
                            padding-top: 15px !important;
                            background-color: rgba(0, 0, 0, 0);
                            -webkit-box-shadow: none;
                            -moz-box-shadow: none;
                            box-shadow: none;
                          }
                          ha-icon {
                            width: 60% !important;
                          }
                          img {
                            width: 100%;
                          }
                          #img-cell {
                            background-color: #F5F5F5;
                            height: 50px !important;
                            width: 50px !important;
                          }
                          #state {
                            padding-top: 5px;
                          }
                                
                  - type: horizontal-stack
                    cards:
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: input_select.coffee_status
                          - show_name: false
                          - show_state: false
                          - tap_action:
                              action: more-info
                              entity: switch.coffee
                          - state:
                              - value: 'False'
                                icon: mdi:coffee
                                label: 'off'
                                color: "#BAC0C6"
                              - value: 'idle'
                                icon: mdi:coffee
                                label: 'idle'
                                color: rgb(152,251,152)
                              - value: 'brewing'
                                label: 'brewing'
                                icon: mdi:coffee
                                color: "#FFA500"
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - entity: switch.kettle
                          - show_state: false
                          - state:
                              - value: 'off'
                                icon: mdi:kettle
                                label: 'off'
                                color: "#BAC0C6"
                              - value: 'on'
                                icon: mdi:kettle
                                label: 'idle'
                                color: rgb(152,251,152)
                              - value: 'boiling'
                                label: 'boiling'
                                icon: mdi:kettle
                                color: "#FFA500"
                      - type: custom:decluttering-card
                        template: nest_button
                        variables:
                          - show_label: true
                          - show_name: false
                          - show_state: false
                          - name: chester
                          - entity: group.tv
                          - state:
                              - value: 'off'
                                label: 'off'
                                icon: mdi:television
                                color: "#BAC0C6"
                              - value: 'on'
                                label: 'on'
                                icon: mdi:television
                                color: "#FFA500"
                     
              - type: 'custom:text-divider-row'
                text: Temps
              #- type: plant-status
              #  entity: plant.kitty_plant
              #  name: Kitty plant
              #  style: |
              #    ha-card {
              #      font-size: 12px;
              #      font-family: 'SF Display', sans-serif;
              #    }
              #    .header {
              #      height: 20px;
              #      margin-top: -20px;
              #      font-weight: bold !important;
              #      font-size: 16px !important;
              #      font-family: 'SF Display', sans-serif !important;
              #    }
              #- type: "custom:button-card"
              #  entity: binary_sensor.mingleberries_status
              #  icon: mdi:minecraft
              #  color_type: icon
              #  layout: icon_name_state2nd
              #  show_state: false
              #  show_label: true
              #  show_name: true
              #  name: >
              #    [[[
              #      return states['sensor.mingleberries_players_online'].state + ' players online';
              #    ]]]
              #  label: >
              #    [[[
              #      return `<ha-icon
              #        icon="mdi:signal"
              #        style="width: 16px; height: 16px; color: var(--paper-item-icon-active-color);">
              #        </ha-icon><span> <span style="color: var(--text-color-sensor);">${states['sensor.mingleberries_latency_time'].state}</span></span>`
              #    ]]]
              #  tap_action:
              #    action: call-service
              #    service: browser_mod.popup
              #    service_data:
              #      title: Close
              #      large: true
              #      style:
              #        border-radius: 0.8vw 0.8vw 0.8vw 0.8vw
              #      deviceID:
              #        - this
              #      card:
              #        type: custom:hui-vertical-stack-card
              #        cards:
              #          - type: entities
              #            entities:
              #              - binary_sensor.mingleberries_status
              #              - sensor.mingleberries_protocol_version
              #              - sensor.mingleberries_version
              #              - entity: sensor.mingleberries_players_online
              #                secondary_info: players_list
              #              - sensor.mingleberries_players_max
              #  styles:
              #    card:
              #      - height: 100px    
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.lounge_temp
                    animate: true
                    name: lounge
                    line_width: 10
                    font_size: 80
                    hour24: true
                    hours_to_show: 24
                    state_adaptive_color: true
                    show:
                      labels: false
                      fill: true
                      name_adaptive_color: true
                      icon_adaptive_color: true
                      extrema: false
                    color_thresholds:
                      - value: 0
                        color: "#CCE5FF"
                      - value: 10
                        color: "#66B2FF"
                      - value: 18
                        color: "#0080FF"
                      - value: 20
                        color: "#87c087"
                      - value: 21
                        color: "#389638"
                      - value: 24
                        color: "#FF9932"
                      - value: 25
                        color: "#FF8000"
                      - value: 26
                        color: "#ff0000"
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif;
                        margin-top: 8px !important;
                        margin-bottom: 8px !important;
                      }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.lounge_temp_2
                    animate: true
                    name: humidity
                    line_width: 10
                    line_color: var(--accent-color)
                    font_size: 80
                    hour24: true
                    hours_to_show: 24
                    show:
                      labels: false
                      name_adaptive_color: true
                      icon_adaptive_color: true
                      fill: true
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif;
                        margin-top: 8px !important;
                        margin-bottom: 8px !important;
                      }                      
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.bedroom_temp
                    animate: true
                    name: bedroom
                    line_width: 10
                    font_size: 80
                    hour24: true
                    hours_to_show: 24
                    state_adaptive_color: true
                    show:
                      labels: false
                      fill: true
                      name_adaptive_color: true
                      icon_adaptive_color: true
                      extrema: false
                    color_thresholds:
                      - value: 0
                        color: "#CCE5FF"
                      - value: 10
                        color: "#66B2FF"
                      - value: 18
                        color: "#0080FF"
                      - value: 20
                        color: "#87c087"
                      - value: 21
                        color: "#389638"
                      - value: 24
                        color: "#FF9932"
                      - value: 25
                        color: "#FF8000"
                      - value: 26
                        color: "#ff0000"
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif;
                        margin-top: 0px !important;
                        margin-bottom: 8px !important;
                      }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.bedroom_temp_2
                    animate: true
                    name: humidity
                    line_width: 10
                    line_color: var(--accent-color)
                    font_size: 80
                    hour24: true
                    hours_to_show: 24
                    show:
                      labels: false
                      name_adaptive_color: true
                      icon_adaptive_color: true
                      fill: true
                    style: |
                      ha-card {
                        font-family: 'SF Display', sans-serif;
                        margin-top: 0px !important;
                        margin-bottom: 8px !important;
                      }
             